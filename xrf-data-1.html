<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2.2 XRF Data | Using Itrax Data in R</title>
  <meta name="description" content="This book is a guide to importing, tidying, manipulating and analysing Itrax core scanner data in R." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="2.2 XRF Data | Using Itrax Data in R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book is a guide to importing, tidying, manipulating and analysing Itrax core scanner data in R." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2.2 XRF Data | Using Itrax Data in R" />
  
  <meta name="twitter:description" content="This book is a guide to importing, tidying, manipulating and analysing Itrax core scanner data in R." />
  

<meta name="author" content="Thomas Bishop" />


<meta name="date" content="2021-04-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="metadata-1.html"/>
<link rel="next" href="optical-images-1.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Using Itrax Data in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="0.1" data-path="the-itraxr-package.html"><a href="the-itraxr-package.html"><i class="fa fa-check"></i><b>0.1</b> The itraxR Package</a></li>
<li class="chapter" data-level="0.2" data-path="prerequisites.html"><a href="prerequisites.html"><i class="fa fa-check"></i><b>0.2</b> Prerequisites</a></li>
<li class="chapter" data-level="0.3" data-path="example-data.html"><a href="example-data.html"><i class="fa fa-check"></i><b>0.3</b> Example Data</a></li>
<li class="chapter" data-level="0.4" data-path="utility-data.html"><a href="utility-data.html"><i class="fa fa-check"></i><b>0.4</b> Utility Data</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Data Structure</a><ul>
<li class="chapter" data-level="1.1" data-path="metadata.html"><a href="metadata.html"><i class="fa fa-check"></i><b>1.1</b> Metadata</a></li>
<li class="chapter" data-level="1.2" data-path="xrf-data.html"><a href="xrf-data.html"><i class="fa fa-check"></i><b>1.2</b> XRF Data</a></li>
<li class="chapter" data-level="1.3" data-path="optical-images.html"><a href="optical-images.html"><i class="fa fa-check"></i><b>1.3</b> Optical Images</a></li>
<li class="chapter" data-level="1.4" data-path="radiographic-images.html"><a href="radiographic-images.html"><i class="fa fa-check"></i><b>1.4</b> Radiographic Images</a></li>
<li class="chapter" data-level="1.5" data-path="magnetic-susceptability.html"><a href="magnetic-susceptability.html"><i class="fa fa-check"></i><b>1.5</b> Magnetic Susceptability</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="importing.html"><a href="importing.html"><i class="fa fa-check"></i><b>2</b> Importing Data</a><ul>
<li class="chapter" data-level="2.1" data-path="metadata-1.html"><a href="metadata-1.html"><i class="fa fa-check"></i><b>2.1</b> Metadata</a></li>
<li class="chapter" data-level="2.2" data-path="xrf-data-1.html"><a href="xrf-data-1.html"><i class="fa fa-check"></i><b>2.2</b> XRF Data</a><ul>
<li class="chapter" data-level="2.2.1" data-path="xrf-data-1.html"><a href="xrf-data-1.html#processed-data"><i class="fa fa-check"></i><b>2.2.1</b> Processed Data</a></li>
<li class="chapter" data-level="2.2.2" data-path="xrf-data-1.html"><a href="xrf-data-1.html#joining-xrf-data"><i class="fa fa-check"></i><b>2.2.2</b> Joining XRF Data</a></li>
<li class="chapter" data-level="2.2.3" data-path="xrf-data-1.html"><a href="xrf-data-1.html#raw-data"><i class="fa fa-check"></i><b>2.2.3</b> Raw Data</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="optical-images-1.html"><a href="optical-images-1.html"><i class="fa fa-check"></i><b>2.3</b> Optical Images</a></li>
<li class="chapter" data-level="2.4" data-path="radiographic-images-1.html"><a href="radiographic-images-1.html"><i class="fa fa-check"></i><b>2.4</b> Radiographic Images</a></li>
<li class="chapter" data-level="2.5" data-path="importing-everything.html"><a href="importing-everything.html"><i class="fa fa-check"></i><b>2.5</b> Importing Everything</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tidying-data.html"><a href="tidying-data.html"><i class="fa fa-check"></i><b>3</b> Tidying Data</a><ul>
<li class="chapter" data-level="3.1" data-path="low-count-rates.html"><a href="low-count-rates.html"><i class="fa fa-check"></i><b>3.1</b> Low Count Rates</a></li>
<li class="chapter" data-level="3.2" data-path="model-errors-mse.html"><a href="model-errors-mse.html"><i class="fa fa-check"></i><b>3.2</b> Model Errors (MSE)</a></li>
<li class="chapter" data-level="3.3" data-path="surface-slope.html"><a href="surface-slope.html"><i class="fa fa-check"></i><b>3.3</b> Surface Slope</a></li>
<li class="chapter" data-level="3.4" data-path="combining-validity-flags.html"><a href="combining-validity-flags.html"><i class="fa fa-check"></i><b>3.4</b> Combining “Validity” Flags</a></li>
<li class="chapter" data-level="3.5" data-path="tube-current.html"><a href="tube-current.html"><i class="fa fa-check"></i><b>3.5</b> Tube current</a></li>
<li class="chapter" data-level="3.6" data-path="dead-time.html"><a href="dead-time.html"><i class="fa fa-check"></i><b>3.6</b> Dead Time</a></li>
<li class="chapter" data-level="3.7" data-path="correcting-for-water-content.html"><a href="correcting-for-water-content.html"><i class="fa fa-check"></i><b>3.7</b> Correcting for Water Content</a></li>
<li class="chapter" data-level="3.8" data-path="correcting-grain-size.html"><a href="correcting-grain-size.html"><i class="fa fa-check"></i><b>3.8</b> Correcting Grain Size</a></li>
<li class="chapter" data-level="3.9" data-path="uncertainties.html"><a href="uncertainties.html"><i class="fa fa-check"></i><b>3.9</b> Uncertainties</a></li>
<li class="chapter" data-level="3.10" data-path="noisy-data.html"><a href="noisy-data.html"><i class="fa fa-check"></i><b>3.10</b> Noisy Data</a></li>
<li class="chapter" data-level="3.11" data-path="reversing-data.html"><a href="reversing-data.html"><i class="fa fa-check"></i><b>3.11</b> Reversing Data</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="plotting.html"><a href="plotting.html"><i class="fa fa-check"></i><b>4</b> Plotting</a><ul>
<li class="chapter" data-level="4.1" data-path="plotting-xrf-data.html"><a href="plotting-xrf-data.html"><i class="fa fa-check"></i><b>4.1</b> Plotting XRF Data</a></li>
<li class="chapter" data-level="4.2" data-path="plotting-images.html"><a href="plotting-images.html"><i class="fa fa-check"></i><b>4.2</b> Plotting Images</a></li>
<li class="chapter" data-level="4.3" data-path="combining-images-with-xrf-data.html"><a href="combining-images-with-xrf-data.html"><i class="fa fa-check"></i><b>4.3</b> Combining Images with XRF Data</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="transforming-data.html"><a href="transforming-data.html"><i class="fa fa-check"></i><b>5</b> Transforming Data</a><ul>
<li class="chapter" data-level="5.1" data-path="ratios-and-normalisation.html"><a href="ratios-and-normalisation.html"><i class="fa fa-check"></i><b>5.1</b> Ratios and Normalisation</a></li>
<li class="chapter" data-level="5.2" data-path="running-mean-and-other-window-functions.html"><a href="running-mean-and-other-window-functions.html"><i class="fa fa-check"></i><b>5.2</b> Running Mean and Other Window Functions</a></li>
<li class="chapter" data-level="5.3" data-path="preparing-data-for-multivariate-data-analysis.html"><a href="preparing-data-for-multivariate-data-analysis.html"><i class="fa fa-check"></i><b>5.3</b> Preparing Data for Multivariate Data Analysis</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="multivariate-methods.html"><a href="multivariate-methods.html"><i class="fa fa-check"></i><b>6</b> Multivariate Methods</a><ul>
<li class="chapter" data-level="6.1" data-path="correlation-coefficients.html"><a href="correlation-coefficients.html"><i class="fa fa-check"></i><b>6.1</b> Correlation Coefficients</a></li>
<li class="chapter" data-level="6.2" data-path="unconstrained-cluster-analysis.html"><a href="unconstrained-cluster-analysis.html"><i class="fa fa-check"></i><b>6.2</b> Unconstrained Cluster Analysis</a></li>
<li class="chapter" data-level="6.3" data-path="constrained-cluster-analysis.html"><a href="constrained-cluster-analysis.html"><i class="fa fa-check"></i><b>6.3</b> Constrained Cluster Analysis</a></li>
<li class="chapter" data-level="6.4" data-path="principle-components-analysis.html"><a href="principle-components-analysis.html"><i class="fa fa-check"></i><b>6.4</b> Principle Components Analysis</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="calibrating-data.html"><a href="calibrating-data.html"><i class="fa fa-check"></i><b>7</b> Calibrating Data</a><ul>
<li class="chapter" data-level="7.1" data-path="suitable-methods.html"><a href="suitable-methods.html"><i class="fa fa-check"></i><b>7.1</b> Suitable Methods</a></li>
<li class="chapter" data-level="7.2" data-path="preparing-data.html"><a href="preparing-data.html"><i class="fa fa-check"></i><b>7.2</b> Preparing Data</a></li>
<li class="chapter" data-level="7.3" data-path="linear-methods.html"><a href="linear-methods.html"><i class="fa fa-check"></i><b>7.3</b> Linear Methods</a></li>
<li class="chapter" data-level="7.4" data-path="log-ratio-methods.html"><a href="log-ratio-methods.html"><i class="fa fa-check"></i><b>7.4</b> Log-Ratio Methods</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="exporting-data.html"><a href="exporting-data.html"><i class="fa fa-check"></i><b>8</b> Exporting Data</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Using Itrax Data in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="xrf-data-1" class="section level2">
<h2><span class="header-section-number">2.2</span> XRF Data</h2>
<div id="processed-data" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Processed Data</h3>
<p>This is the data most commonly used in analysis and it can be quickly imported using <code>itraxR::itrax_import()</code>. Note that, like for the example data, it is possible to have more than one processed data file. Typically cores have at least two, one created at the time of the scan based on settings for a single point near the top of the sequence, and another from a holistic re-analysis of the sequence.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="xrf-data-1.html#cb6-1"></a><span class="kw">itrax_import</span>(<span class="st">&quot;CD166_19_S1/CD166_19_S1/Results.txt&quot;</span>, <span class="dt">depth =</span> <span class="dv">0</span>) <span class="op">%&gt;%</span></span>
<span id="cb6-2"><a href="xrf-data-1.html#cb6-2"></a><span class="st">  </span><span class="kw">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 1,281
## Columns: 43
## $ depth    &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18…
## $ MSE      &lt;dbl&gt; 1.41, 1.57, 1.55, 1.41, 1.41, 1.36, 1.52, 1.38, 1.58, 1.52, 1…
## $ cps      &lt;dbl&gt; 34525, 38370, 39796, 40022, 41973, 41268, 40977, 41104, 41408…
## $ validity &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, T…
## $ Al       &lt;dbl&gt; 76, 57, 74, 26, 53, 27, 72, 78, 69, 70, 61, 45, 41, 51, 90, 7…
## $ Si       &lt;dbl&gt; 275, 306, 330, 206, 233, 347, 337, 346, 403, 381, 301, 491, 5…
## $ P        &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
## $ S        &lt;dbl&gt; 10, 0, 32, 21, 37, 28, 59, 19, 44, 30, 0, 54, 48, 0, 28, 35, …
## $ Cl       &lt;dbl&gt; 1318, 1513, 1470, 1312, 1740, 1576, 1605, 1559, 1503, 1428, 1…
## $ Ar       &lt;dbl&gt; 604, 595, 506, 555, 591, 504, 584, 489, 597, 512, 547, 592, 6…
## $ K        &lt;dbl&gt; 2565, 2628, 2378, 2265, 2947, 3179, 3376, 3193, 3220, 2732, 2…
## $ Ca       &lt;dbl&gt; 112734, 144287, 162938, 153194, 135879, 132183, 134094, 13857…
## $ Sc       &lt;dbl&gt; 0, 14, 0, 0, 106, 14, 0, 46, 0, 0, 33, 0, 0, 0, 28, 22, 0, 0,…
## $ Ti       &lt;dbl&gt; 1661, 1806, 2121, 2031, 1826, 1923, 2059, 2443, 2701, 2442, 2…
## $ V        &lt;dbl&gt; 51, 88, 22, 75, 89, 107, 0, 71, 23, 91, 55, 66, 64, 62, 143, …
## $ Cr       &lt;dbl&gt; 258, 326, 301, 306, 440, 401, 440, 407, 449, 336, 329, 443, 4…
## $ Mn       &lt;dbl&gt; 508, 559, 483, 485, 738, 792, 799, 868, 794, 647, 680, 813, 8…
## $ Fe       &lt;dbl&gt; 35168, 36494, 35952, 35512, 44303, 45283, 45694, 46506, 47859…
## $ Ni       &lt;dbl&gt; 123, 104, 134, 144, 166, 151, 125, 157, 180, 147, 132, 160, 1…
## $ Cu       &lt;dbl&gt; 277, 230, 150, 206, 276, 250, 217, 178, 191, 197, 189, 187, 2…
## $ Zn       &lt;dbl&gt; 205, 268, 123, 239, 240, 294, 284, 238, 230, 211, 210, 226, 1…
## $ Ga       &lt;dbl&gt; 4, 48, 0, 0, 0, 40, 8, 22, 26, 0, 47, 57, 0, 125, 0, 0, 0, 39…
## $ Ge       &lt;dbl&gt; 0, 40, 43, 0, 0, 48, 115, 100, 80, 164, 110, 132, 98, 90, 68,…
## $ Br       &lt;dbl&gt; 491, 605, 550, 609, 659, 709, 583, 582, 635, 545, 678, 535, 4…
## $ Rb       &lt;dbl&gt; 329, 76, 295, 313, 304, 318, 337, 323, 223, 306, 168, 252, 24…
## $ Sr       &lt;dbl&gt; 8306, 9181, 9644, 9940, 10287, 9917, 9931, 9897, 9209, 9869, …
## $ Y        &lt;dbl&gt; 15, 140, 119, 107, 180, 106, 52, 77, 112, 144, 237, 151, 188,…
## $ Zr       &lt;dbl&gt; 255, 322, 280, 475, 160, 312, 319, 319, 552, 484, 373, 634, 7…
## $ Pd       &lt;dbl&gt; 31, 78, 75, 66, 31, 72, 31, 54, 58, 70, 55, 81, 43, 6, 42, 79…
## $ Cd       &lt;dbl&gt; 13, 34, 55, 24, 34, 28, 56, 62, 96, 79, 41, 84, 64, 43, 75, 5…
## $ I        &lt;dbl&gt; 38, 48, 80, 67, 23, 58, 30, 53, 93, 43, 36, 126, 58, 85, 28, …
## $ Cs       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
## $ Ba       &lt;dbl&gt; 63, 48, 25, 60, 132, 93, 172, 108, 108, 22, 74, 123, 82, 67, …
## $ Nd       &lt;dbl&gt; 17, 67, 44, 75, 42, 97, 92, 68, 56, 59, 41, 50, 73, 56, 78, 4…
## $ Sm       &lt;dbl&gt; 43, 46, 39, 64, 36, 12, 24, 69, 68, 17, 47, 59, 37, 45, 28, 4…
## $ Yb       &lt;dbl&gt; 144, 282, 158, 218, 163, 184, 248, 166, 188, 169, 247, 216, 1…
## $ Ta       &lt;dbl&gt; 789, 776, 703, 794, 919, 852, 926, 840, 847, 790, 736, 805, 6…
## $ W        &lt;dbl&gt; 1992, 2019, 2016, 2160, 2344, 2336, 2243, 2267, 2185, 2203, 2…
## $ Pb       &lt;dbl&gt; 77, 0, 13, 152, 54, 54, 75, 111, 78, 0, 92, 22, 0, 81, 19, 71…
## $ Bi       &lt;dbl&gt; 72, 136, 199, 134, 157, 182, 151, 185, 116, 164, 141, 135, 16…
## $ `Mo inc` &lt;dbl&gt; 26323, 26778, 26550, 28310, 31356, 30631, 29040, 29104, 27932…
## $ `Mo coh` &lt;dbl&gt; 8799, 9117, 9303, 9886, 10140, 9968, 9973, 9701, 9751, 9639, …
## $ position &lt;dbl&gt; 32.54, 33.54, 34.54, 35.54, 36.54, 37.54, 38.54, 39.54, 40.54…</code></pre>
</div>
<div id="joining-xrf-data" class="section level3">
<h3><span class="header-section-number">2.2.2</span> Joining XRF Data</h3>
<p>Often a core (sometimes referred to as a drive) is comprised of a sequence of individual sections, which may or may not be overlapping. Often we will want to integrate them into a continuous dataset for analytical purposes. When joining cores that do not overlap, this process is trivial — the data might simply appended in order of depth, and a new column is added with the identity of the original core section.</p>
<p>Where overlapping cores are present, there can be multiple measurements at a single depth (on different cores). In these cases not only will the individual measurements need to be re-ordered by depth, but an additional variable should be created that can be used in combination or alone to uniquely identify each measurement. The code below does this by creating an additional variable called <code>label</code>, with the name of the original core given in the named list.</p>
<pre><code>mylist &lt;- list(core1 = core1, core2 = core2)
df &lt;- lapply(names(mylist), function(i) within(mylist[[i]], {label &lt;- i})) %&gt;% 
  bind_rows() %&gt;% 
  arrange(depth)</code></pre>
<p>This process can be simplified using <code>itraxR::itrax_join()</code>, for example:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="xrf-data-1.html#cb9-1"></a><span class="co"># import the core sections</span></span>
<span id="cb9-2"><a href="xrf-data-1.html#cb9-2"></a>CD166_<span class="dv">19</span>_S1 &lt;-<span class="st"> </span><span class="kw">itrax_import</span>(<span class="st">&quot;CD166_19_S1/CD166_19_S1/Results.txt&quot;</span>, <span class="dt">depth_top =</span> <span class="dv">0</span>)</span>
<span id="cb9-3"><a href="xrf-data-1.html#cb9-3"></a>CD166_<span class="dv">19</span>_S2 &lt;-<span class="st"> </span><span class="kw">itrax_import</span>(<span class="st">&quot;CD166_19_S2/CD166_19_S2/Results.txt&quot;</span>, <span class="dt">depth_top =</span> <span class="kw">max</span>(CD166_<span class="dv">19</span>_S1<span class="op">$</span>depth))</span>
<span id="cb9-4"><a href="xrf-data-1.html#cb9-4"></a>CD166_<span class="dv">19</span>_S3 &lt;-<span class="st"> </span><span class="kw">itrax_import</span>(<span class="st">&quot;CD166_19_S3/CD166_19_S3/Results.txt&quot;</span>, <span class="dt">depth_top =</span> <span class="kw">max</span>(CD166_<span class="dv">19</span>_S2<span class="op">$</span>depth))</span>
<span id="cb9-5"><a href="xrf-data-1.html#cb9-5"></a><span class="co">#join them together</span></span>
<span id="cb9-6"><a href="xrf-data-1.html#cb9-6"></a>CD166_<span class="dv">19</span> &lt;-<span class="st"> </span><span class="kw">itrax_join</span>(<span class="kw">list</span>(<span class="dt">S1 =</span> CD166_<span class="dv">19</span>_S1, <span class="dt">S2 =</span> CD166_<span class="dv">19</span>_S2, <span class="dt">S3 =</span> CD166_<span class="dv">19</span>_S3))</span>
<span id="cb9-7"><a href="xrf-data-1.html#cb9-7"></a><span class="kw">rm</span>(CD166_<span class="dv">19</span>_S1, CD166_<span class="dv">19</span>_S2, CD166_<span class="dv">19</span>_S3)</span>
<span id="cb9-8"><a href="xrf-data-1.html#cb9-8"></a><span class="kw">glimpse</span>(CD166_<span class="dv">19</span>)</span></code></pre></div>
<pre><code>## Rows: 4,206
## Columns: 44
## $ depth    &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18…
## $ MSE      &lt;dbl&gt; 1.41, 1.57, 1.55, 1.41, 1.41, 1.36, 1.52, 1.38, 1.58, 1.52, 1…
## $ cps      &lt;dbl&gt; 34525, 38370, 39796, 40022, 41973, 41268, 40977, 41104, 41408…
## $ validity &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, T…
## $ Al       &lt;dbl&gt; 76, 57, 74, 26, 53, 27, 72, 78, 69, 70, 61, 45, 41, 51, 90, 7…
## $ Si       &lt;dbl&gt; 275, 306, 330, 206, 233, 347, 337, 346, 403, 381, 301, 491, 5…
## $ P        &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
## $ S        &lt;dbl&gt; 10, 0, 32, 21, 37, 28, 59, 19, 44, 30, 0, 54, 48, 0, 28, 35, …
## $ Cl       &lt;dbl&gt; 1318, 1513, 1470, 1312, 1740, 1576, 1605, 1559, 1503, 1428, 1…
## $ Ar       &lt;dbl&gt; 604, 595, 506, 555, 591, 504, 584, 489, 597, 512, 547, 592, 6…
## $ K        &lt;dbl&gt; 2565, 2628, 2378, 2265, 2947, 3179, 3376, 3193, 3220, 2732, 2…
## $ Ca       &lt;dbl&gt; 112734, 144287, 162938, 153194, 135879, 132183, 134094, 13857…
## $ Sc       &lt;dbl&gt; 0, 14, 0, 0, 106, 14, 0, 46, 0, 0, 33, 0, 0, 0, 28, 22, 0, 0,…
## $ Ti       &lt;dbl&gt; 1661, 1806, 2121, 2031, 1826, 1923, 2059, 2443, 2701, 2442, 2…
## $ V        &lt;dbl&gt; 51, 88, 22, 75, 89, 107, 0, 71, 23, 91, 55, 66, 64, 62, 143, …
## $ Cr       &lt;dbl&gt; 258, 326, 301, 306, 440, 401, 440, 407, 449, 336, 329, 443, 4…
## $ Mn       &lt;dbl&gt; 508, 559, 483, 485, 738, 792, 799, 868, 794, 647, 680, 813, 8…
## $ Fe       &lt;dbl&gt; 35168, 36494, 35952, 35512, 44303, 45283, 45694, 46506, 47859…
## $ Ni       &lt;dbl&gt; 123, 104, 134, 144, 166, 151, 125, 157, 180, 147, 132, 160, 1…
## $ Cu       &lt;dbl&gt; 277, 230, 150, 206, 276, 250, 217, 178, 191, 197, 189, 187, 2…
## $ Zn       &lt;dbl&gt; 205, 268, 123, 239, 240, 294, 284, 238, 230, 211, 210, 226, 1…
## $ Ga       &lt;dbl&gt; 4, 48, 0, 0, 0, 40, 8, 22, 26, 0, 47, 57, 0, 125, 0, 0, 0, 39…
## $ Ge       &lt;dbl&gt; 0, 40, 43, 0, 0, 48, 115, 100, 80, 164, 110, 132, 98, 90, 68,…
## $ Br       &lt;dbl&gt; 491, 605, 550, 609, 659, 709, 583, 582, 635, 545, 678, 535, 4…
## $ Rb       &lt;dbl&gt; 329, 76, 295, 313, 304, 318, 337, 323, 223, 306, 168, 252, 24…
## $ Sr       &lt;dbl&gt; 8306, 9181, 9644, 9940, 10287, 9917, 9931, 9897, 9209, 9869, …
## $ Y        &lt;dbl&gt; 15, 140, 119, 107, 180, 106, 52, 77, 112, 144, 237, 151, 188,…
## $ Zr       &lt;dbl&gt; 255, 322, 280, 475, 160, 312, 319, 319, 552, 484, 373, 634, 7…
## $ Pd       &lt;dbl&gt; 31, 78, 75, 66, 31, 72, 31, 54, 58, 70, 55, 81, 43, 6, 42, 79…
## $ Cd       &lt;dbl&gt; 13, 34, 55, 24, 34, 28, 56, 62, 96, 79, 41, 84, 64, 43, 75, 5…
## $ I        &lt;dbl&gt; 38, 48, 80, 67, 23, 58, 30, 53, 93, 43, 36, 126, 58, 85, 28, …
## $ Cs       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
## $ Ba       &lt;dbl&gt; 63, 48, 25, 60, 132, 93, 172, 108, 108, 22, 74, 123, 82, 67, …
## $ Nd       &lt;dbl&gt; 17, 67, 44, 75, 42, 97, 92, 68, 56, 59, 41, 50, 73, 56, 78, 4…
## $ Sm       &lt;dbl&gt; 43, 46, 39, 64, 36, 12, 24, 69, 68, 17, 47, 59, 37, 45, 28, 4…
## $ Yb       &lt;dbl&gt; 144, 282, 158, 218, 163, 184, 248, 166, 188, 169, 247, 216, 1…
## $ Ta       &lt;dbl&gt; 789, 776, 703, 794, 919, 852, 926, 840, 847, 790, 736, 805, 6…
## $ W        &lt;dbl&gt; 1992, 2019, 2016, 2160, 2344, 2336, 2243, 2267, 2185, 2203, 2…
## $ Pb       &lt;dbl&gt; 77, 0, 13, 152, 54, 54, 75, 111, 78, 0, 92, 22, 0, 81, 19, 71…
## $ Bi       &lt;dbl&gt; 72, 136, 199, 134, 157, 182, 151, 185, 116, 164, 141, 135, 16…
## $ `Mo inc` &lt;dbl&gt; 26323, 26778, 26550, 28310, 31356, 30631, 29040, 29104, 27932…
## $ `Mo coh` &lt;dbl&gt; 8799, 9117, 9303, 9886, 10140, 9968, 9973, 9701, 9751, 9639, …
## $ position &lt;dbl&gt; 32.54, 33.54, 34.54, 35.54, 36.54, 37.54, 38.54, 39.54, 40.54…
## $ label    &lt;chr&gt; &quot;S1&quot;, &quot;S1&quot;, &quot;S1&quot;, &quot;S1&quot;, &quot;S1&quot;, &quot;S1&quot;, &quot;S1&quot;, &quot;S1&quot;, &quot;S1&quot;, &quot;S1&quot;, &quot;…</code></pre>
</div>
<div id="raw-data" class="section level3">
<h3><span class="header-section-number">2.2.3</span> Raw Data</h3>
<p>Sometimes it is useful to work with raw data rather than the calculated intensity data from the <code>Q-Spec</code> software. In this case, the raw data can be read directly from the individual files in the relevant directory. For individual measurements this is fairly trivial, although it must be considered that the data output is not calibrated to an energy and the data are in counts, not intensities. If the entire scan is read, some mechanism to iterate through the individual data files, adding them to a structured data object with relevant metadata (positions, for example) is required.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="metadata-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="optical-images-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["itraxBook.pdf", "itraxBook.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
