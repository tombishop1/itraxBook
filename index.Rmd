--- 
title: "Using Itrax Data in R"
author: "Thomas Bishop"
date: "`r Sys.Date()`"
site: bookdown::bookdown_site
documentclass: book
bibliography: biblio.bib
biblio-style: apalike
link-citations: yes
description: This book is a guide to importing, tidying, manipulating and analysing
  Itrax core scanner data in R.
---

# Preface {-}

## Why did I write this book?
During the COVID-19 pandemic in 2020 it became necessary to formalise (or at least, organise) the support offered to students using the Itrax core scanner at The University of Manchester Geography Laboratories so they could be offered online. This led to an unexpectedly popular series of seminars. When these came to an end, we decided it would be useful to summarise our seminars into a reference guide that could be updated over time. This is that guide.  

## Prerequisites
This guide assumes a basic knowledge of `R` and the `tidyverse`, including data types, assignments, and pipes. It also assumes a background knowledge of the core scanner and the nature of the data it produces; see @Croudace2019 and references therein. Some of the sections on data analysis assume some knowledge of compositional data analysis. 

## Example Data
All of the examples in this book use scans from a sequence of marine sediment cores obtained during a cruise of the RRS Charles Darwin CD166 on the 6th of November 2004. The 4.3 meter sequence was obtained at station CD16619-01 (31ยบ30.794'N, 17ยบ11.777'W) from a depth of 4,467 meters. It is notable for containing a series of volcanic "bypass" turbidites. The scans were performed at the British Ocean Sediment Core Research Facility (BOSCORF) at the National Oceanographic Centre, Southampton in 2020. The drive is a sequence of three consecutive cores, and have been scanned for photographic and radiographic line-scan imagery, as well as three repeats of x-ray flourescence measurements. The data can be downloaded from the Github pages that form the source for this document, available at [github.com/tombishop1/itraxBook](https://github.com/tombishop1/itraxBook). 

```{r setup, include=FALSE, echo=FALSE}
require("knitr")
opts_knit$set(root.dir = "CD166_19_(2020)/")

# check if itraxR is installed, if not, install
if (!require("itraxR", character.only = TRUE)) {
  install.packages("remotes")
  remotes::install_github("tombishop1/itraxR")
  library(itraxR)
}

# now check dependencies
## First specify the packages of interest
# these are the dependencies for:
# the document - kableExtra, DiagrammeR
# itrax_import - readr, janitor, dplyr
# itrax_join   - dplyr
# itrax_meta   - none 
packages = c("janitor", "dplyr", "readr", "kableExtra", "DiagrammeR")

## Now load or install & load all those CRAN packages
package.check <- lapply(
  packages,
  FUN = function(x) {
    if (!require(x, character.only = TRUE)) {
      install.packages(x, dependencies = TRUE, repos = "http://cran.uk.r-project.org")
      library(x, character.only = TRUE)
    }
  }
)
rm(package.check, packages)

```